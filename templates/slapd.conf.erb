# Server Configuration
pidfile  /var/run/slapd/slapd.pid
argsfile /var/run/slapd/slapd.args
loglevel <%= @loglevel %>

# Schemas
<% @schemas.each do |name| -%>
include /etc/ldap/schema/<%= schema %>.schema
<% end -%>

# Modules
<% @modules.each do |name| -%>
moduleload <%= name %>
<% end -%>

# Indexes
<% @indexes.each do |name| -%>
index <%= name %>
<% end -%>

<% if @ssl == true -%>
# SSL
TLSCACertificateFile   <%= @ssl_ca %>
TLSCertificateFile     <%= @ssl_cert %>
TLSCertificateKeyFile  <%= @ssl_key %>
<% end -%>

# Database definition
database  bdb
suffix    <%= @suffix %>
directory <%= @directory %>
rootdn    <%= @rootdn %>
rootpw    <%= @rootpw %>

# Database parameters 
cachesize 10000
checkpoint 128 15